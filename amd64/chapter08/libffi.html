<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      8.50.&nbsp;Libffi-3.4.4
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-12.1-systemd">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version 12.1-systemd
      </h4>
      <h3>
        Chapter&nbsp;8.&nbsp;Installing Basic System Software
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf from Elfutils-0.190">Prev</a>
          <p>
            Libelf from Elfutils-0.190
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="Python.html" title="Python-3.12.2">Next</a>
          <p>
            Python-3.12.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapter&nbsp;8.&nbsp;Installing Basic System Software">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 12.1-systemd">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="ch-system-libffi" name="ch-system-libffi"></a>8.50. Libffi-3.4.4
    </h1>
    <div class="wrap" lang="en" xml:lang="en">
      <div class="package" lang="en" xml:lang="en">
        <p>
          The Libffi library provides a portable, high level programming
          interface to various calling conventions. This allows a programmer
          to call any function specified by a call interface description at
          run time.
        </p>
        <p>
          FFI stands for Foreign Function Interface. An FFI allows a program
          written in one language to call a program written in another
          language. Specifically, Libffi can provide a bridge between an
          interpreter like Perl, or Python, and shared library subroutines
          written in C, or C++.
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Approximate build time:</strong>
              <span class="segbody">1.8 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">Required disk space:</strong>
              <span class="segbody">11 MB</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          8.50.1. Installation of Libffi
        </h2>
        <div class="admon note">
          <img alt="[Note]" src="../images/note.png" />
          <h3>
            Note
          </h3>
          <p>
            Like GMP, Libffi builds with optimizations specific to the
            processor in use. If building for another system, change the
            value of the <em class=
            "parameter"><code>--with-gcc-arch=</code></em> parameter in the
            following command to an architecture name fully implemented by
            the CPU on that system. If this is not done, all applications
            that link to <code class="filename">libffi</code> will trigger
            Illegal Operation Errors.
          </p>
        </div>
        <p>
          Prepare Libffi for compilation:
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr          \
            --disable-static       \
            --with-gcc-arch=native</kbd></pre>
        <div class="variablelist">
          <p class="title">
            <strong>The meaning of the configure option:</strong>
          </p>
          <dl class="variablelist">
            <dt>
              <span class="term"><em class=
              "parameter"><code>--with-gcc-arch=native</code></em></span>
            </dt>
            <dd>
              <p>
                Ensure GCC optimizes for the current system. If this is not
                specified, the system is guessed and the code generated may
                not be correct. If the generated code will be copied from the
                native system to a less capable system, use the less capable
                system as a parameter. For details about alternative system
                types, see <a class="ulink" href=
                "https://gcc.gnu.org/onlinedocs/gcc-13.2.0/gcc/x86-Options.html">
                the x86 options in the GCC manual</a>.
              </p>
            </dd>
          </dl>
        </div>
        <p>
          Compile the package:
        </p>
        <pre class="userinput"><kbd class="command">make</kbd></pre>
        <p>
          To test the results, issue:
        </p>
        <pre class="userinput"><kbd class="command">make check</kbd></pre>
        <p>
          Install the package:
        </p>
        <pre class="userinput"><kbd class="command">make install</kbd></pre>
      </div>
      <div class="content" lang="en" xml:lang="en">
        <h2 class="sect2">
          <a id="contents-libffi" name="contents-libffi"></a>8.50.2. Contents
          of Libffi
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">Installed library:</strong>
              <span class="segbody">libffi.so</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            Short Descriptions
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="libffi" name="libffi"></a><span class=
                    "term"><code class="filename">libffi</code></span>
                  </p>
                </td>
                <td>
                  <p>
                    Contains the foreign function interface API functions
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="libelf.html" title=
          "Libelf from Elfutils-0.190">Prev</a>
          <p>
            Libelf from Elfutils-0.190
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="Python.html" title="Python-3.12.2">Next</a>
          <p>
            Python-3.12.2
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter08.html" title=
          "Chapter&nbsp;8.&nbsp;Installing Basic System Software">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 12.1-systemd">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
