<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      2.2.&nbsp;Host System Requirements
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body class="lfs" id="lfs-12.2">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version 12.2
      </h4>
      <h3>
        Chapter&nbsp;2.&nbsp;Preparing the Host System
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title=
          "Introduction">Prev</a>
          <p>
            Introduction
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="stages.html" title=
          "Building LFS in Stages">Next</a>
          <p>
            Building LFS in Stages
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "Chapter&nbsp;2.&nbsp;Preparing the Host System">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
    <h1 class="sect1">
      <a id="ch-partitioning-hostreqs" name=
      "ch-partitioning-hostreqs"></a>2.2. Host System Requirements
    </h1>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="sect2" lang="en" xml:lang="en">
        <h2 class="sect2">
          2.2.1. Hardware
        </h2>
        <p>
          The LFS editors recommend that the system CPU have at least four
          cores and that the system have at least 8 GB of memory. Older
          systems that do not meet these requirements will still work, but
          the time to build packages will be significantly longer than
          documented.
        </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <h2 class="sect2">
          2.2.2. Software
        </h2>
        <p>
          Your host system should have the following software with the
          minimum versions indicated. This should not be an issue for most
          modern Linux distributions. Also note that many distributions will
          place software headers into separate packages, often in the form of
          <code class="literal"><em class=
          "replaceable"><code>&lt;package-name&gt;</code></em>-devel</code>
          or <code class="literal"><em class=
          "replaceable"><code>&lt;package-name&gt;</code></em>-dev</code>. Be
          sure to install those if your distribution provides them.
        </p>
        <p>
          Earlier versions of the listed software packages may work, but have
          not been tested.
        </p>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                <span class="strong"><strong>Bash-3.2</strong></span>
                (/bin/sh should be a symbolic or hard link to bash)
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Binutils-2.13.1</strong></span>
                (Versions greater than 2.43.1 are not recommended as they
                have not been tested)
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Bison-2.7</strong></span>
                (/usr/bin/yacc should be a link to bison or a small script
                that executes bison)
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Coreutils-8.1</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Diffutils-2.8.1</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Findutils-4.2.31</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Gawk-4.0.1</strong></span>
                (/usr/bin/awk should be a link to gawk)
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>GCC-5.2</strong></span>
                including the C++ compiler, <span class=
                "command"><strong>g++</strong></span> (Versions greater than
                14.2.0 are not recommended as they have not been tested). C
                and C++ standard libraries (with headers) must also be
                present so the C++ compiler can build hosted programs
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Grep-2.5.1a</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Gzip-1.3.12</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Linux
                Kernel-4.19</strong></span>
              </p>
              <p>
                The reason for the kernel version requirement is that we
                specify that version when building <span class=
                "application">glibc</span> in <a class="xref" href=
                "../chapter05/chapter05.html" title=
                "Chapter&nbsp;5.&nbsp;Compiling a Cross-Toolchain">Chapter&nbsp;5</a>
                and <a class="xref" href="../chapter08/chapter08.html" title=
                "Chapter&nbsp;8.&nbsp;Installing Basic System Software">Chapter&nbsp;8</a>,
                so the workarounds for older kernels are not enabled and the
                compiled <span class="application">glibc</span> is slightly
                faster and smaller. As at Feb 2024, 4.19 is the oldest kernel
                release still supported by the kernel developers. Some kernel
                releases older than 4.19 may be still supported by
                third-party teams, but they are not considered official
                upstream kernel releases; read <a class="ulink" href=
                "https://kernel.org/category/releases.html">https://kernel.org/category/releases.html</a>
                for the details.
              </p>
              <p>
                If the host kernel is earlier than 4.19 you will need to
                replace the kernel with a more up-to-date version. There are
                two ways you can go about this. First, see if your Linux
                vendor provides a 4.19 or later kernel package. If so, you
                may wish to install it. If your vendor doesn't offer an
                acceptable kernel package, or you would prefer not to install
                it, you can compile a kernel yourself. Instructions for
                compiling the kernel and configuring the boot loader
                (assuming the host uses GRUB) are located in <a class="xref"
                href="../chapter10/chapter10.html" title=
                "Chapter&nbsp;10.&nbsp;Making the LFS System Bootable">Chapter&nbsp;10</a>.
              </p>
              <p>
                We require the host kernel to support UNIX 98 pseudo terminal
                (PTY). It should be enabled on all desktop or server distros
                shipping Linux 4.19 or a newer kernel. If you are building a
                custom host kernel, ensure <code class=
                "option">CONFIG_UNIX98_PTYS</code> is set to <code class=
                "literal">y</code> in the kernel configuration.
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>M4-1.4.10</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Make-4.0</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Patch-2.5.4</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Perl-5.8.8</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Python-3.4</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Sed-4.1.5</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Tar-1.22</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Texinfo-5.0</strong></span>
              </p>
            </li>
            <li class="listitem">
              <p>
                <span class="strong"><strong>Xz-5.0.0</strong></span>
              </p>
            </li>
          </ul>
        </div>
        <div class="admon important">
          <img alt="[Important]" src="../images/important.png" />
          <h3>
            Important
          </h3>
          <p>
            Note that the symlinks mentioned above are required to build an
            LFS system using the instructions contained within this book.
            Symlinks that point to other software (such as dash, mawk, etc.)
            may work, but are not tested or supported by the LFS development
            team, and may require either deviation from the instructions or
            additional patches to some packages.
          </p>
        </div>
        <h2>
          <a id="version-check" name="version-check"></a>
        </h2>
        <p>
          To see whether your host system has all the appropriate versions,
          and the ability to compile programs, run the following commands:
        </p>
        <pre class="userinput"><kbd class=
        "command">cat &gt; version-check.sh &lt;&lt; "EOF"
<code class="literal">#!/bin/bash
# A script to list version numbers of critical development tools

# If you have tools installed in other directories, adjust PATH here AND
# in ~lfs/.bashrc (section 4.4) as well.

LC_ALL=C 
PATH=/usr/bin:/bin

bail() { echo "FATAL: $1"; exit 1; }
grep --version &gt; /dev/null 2&gt; /dev/null || bail "grep does not work"
sed '' /dev/null || bail "sed does not work"
sort   /dev/null || bail "sort does not work"

ver_check()
{
   if ! type -p $2 &amp;&gt;/dev/null
   then 
     echo "ERROR: Cannot find $2 ($1)"; return 1; 
   fi
   v=$($2 --version 2&gt;&amp;1 | grep -E -o '[0-9]+\.[0-9\.]+[a-z]*' | head -n1)
   if printf '%s\n' $3 $v | sort --version-sort --check &amp;&gt;/dev/null
   then 
     printf "OK:    %-9s %-6s &gt;= $3\n" "$1" "$v"; return 0;
   else 
     printf "ERROR: %-9s is TOO OLD ($3 or later required)\n" "$1"; 
     return 1; 
   fi
}

ver_kernel()
{
   kver=$(uname -r | grep -E -o '^[0-9\.]+')
   if printf '%s\n' $1 $kver | sort --version-sort --check &amp;&gt;/dev/null
   then 
     printf "OK:    Linux Kernel $kver &gt;= $1\n"; return 0;
   else 
     printf "ERROR: Linux Kernel ($kver) is TOO OLD ($1 or later required)\n" "$kver"; 
     return 1; 
   fi
}

# Coreutils first because --version-sort needs Coreutils &gt;= 7.0
ver_check Coreutils      sort     8.1 || bail "Coreutils too old, stop"
ver_check Bash           bash     3.2
ver_check Binutils       ld       2.13.1
ver_check Bison          bison    2.7
ver_check Diffutils      diff     2.8.1
ver_check Findutils      find     4.2.31
ver_check Gawk           gawk     4.0.1
ver_check GCC            gcc      5.2
ver_check "GCC (C++)"    g++      5.2
ver_check Grep           grep     2.5.1a
ver_check Gzip           gzip     1.3.12
ver_check M4             m4       1.4.10
ver_check Make           make     4.0
ver_check Patch          patch    2.5.4
ver_check Perl           perl     5.8.8
ver_check Python         python3  3.4
ver_check Sed            sed      4.1.5
ver_check Tar            tar      1.22
ver_check Texinfo        texi2any 5.0
ver_check Xz             xz       5.0.0
ver_kernel 4.19

if mount | grep -q 'devpts on /dev/pts' &amp;&amp; [ -e /dev/ptmx ]
then echo "OK:    Linux Kernel supports UNIX 98 PTY";
else echo "ERROR: Linux Kernel does NOT support UNIX 98 PTY"; fi

alias_check() {
   if $1 --version 2&gt;&amp;1 | grep -qi $2
   then printf "OK:    %-4s is $2\n" "$1";
   else printf "ERROR: %-4s is NOT $2\n" "$1"; fi
}
echo "Aliases:"
alias_check awk GNU
alias_check yacc Bison
alias_check sh Bash

echo "Compiler check:"
if printf "int main(){}" | g++ -x c++ -
then echo "OK:    g++ works";
else echo "ERROR: g++ does NOT work"; fi
rm -f a.out

if [ "$(nproc)" = "" ]; then
   echo "ERROR: nproc is not available or it produces empty output"
else
   echo "OK: nproc reports $(nproc) logical cores are available"
fi</code>
EOF

bash version-check.sh</kbd></pre>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="introduction.html" title=
          "Introduction">Prev</a>
          <p>
            Introduction
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="stages.html" title=
          "Building LFS in Stages">Next</a>
          <p>
            Building LFS in Stages
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter02.html" title=
          "Chapter&nbsp;2.&nbsp;Preparing the Host System">Up</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 12.2">Home</a>
        </li>
      </ul>
    </div>
  </body>
</html>
